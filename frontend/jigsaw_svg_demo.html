<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Jigsaw Puzzle 12 SVG Pieces</title>

  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f3f3f3;
      font-family: system-ui, sans-serif;
    }

    #board {
      width: 857px;
      height: 600px;
      background: #e2c49a;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.35);
      overflow: hidden;
    }

    svg {
      width: 100%;
      height: 100%;
      display: block;
    }
  </style>
</head>

<body>
<div id="board">
  <!-- thêm xmlns:xlink cho chắc chắn -->
  <svg id="puzzle" viewBox="0 0 857 600"
       xmlns="http://www.w3.org/2000/svg"
       xmlns:xlink="http://www.w3.org/1999/xlink">

    <defs>
      <!-- Ảnh nền đúng kích thước SVG -->
      <image id="full-img"
             href="Picture/puzzle_sample.png"
             x="0" y="0"
             width="857" height="600" />

      <!-- 12 PATH TỪ FIGMA (ĐÃ BỎ fill để không che ảnh) -->
      <path id="piece-0"  d="M200 70C216.569 70 230 83.4315 230 100C230 116.569 217 130 200 130V200H125C125 183.431 111.569 170 95 170C78.4315 170 65 183.431 65 200H0V0H200V70Z" />
      <path id="piece-1"  d="M632.923 70C618.266 70 606.385 83.4315 606.385 100C606.385 116.31 617.898 129.58 632.238 129.99L632.923 130V200H555.077C555.077 183.431 543.195 170 528.538 170C513.881 170 502 183.432 502 200H429.461V129.85C428.487 129.948 427.499 130 426.5 130C410.208 130 397 116.569 397 100C397 83.4315 410.208 70 426.5 70C427.499 70 428.487 70.0507 429.461 70.1494V0H632.923V70Z" />
      <path id="piece-2"  d="M430 70C413.431 70 400 83.4315 400 100C400 116.569 413.431 130 430 130V200H200V130C216.568 130 230 116.568 230 100C230 83.4315 216.568 70.0001 200 70V0H430V70Z" />
      <path id="piece-3"  d="M95 170C111.569 170 125 183.431 125 200H230V268.067C229.339 268.024 228.672 268 228 268C211.431 268 198 281.431 198 298C198 314.569 211.431 328 228 328C228.672 328 229.339 327.975 230 327.932V400H145C145 383.431 131.569 370 115 370C98.4315 370 85 383.431 85 400H0V200H65C65 183.431 78.4315 170 95 170Z" />
      <path id="piece-4"  d="M429 270.018C412.824 270.545 399.874 283.766 399.874 300C399.874 316.234 412.824 329.454 429 329.981V400H356.261C356.261 416.568 342.771 430 326.131 430C309.49 430 296 416.569 296 400H226.984V327.655C225.522 327.882 224.025 328 222.5 328C206.208 328 193 314.569 193 298C193 281.431 206.208 268 222.5 268C224.025 268 225.522 268.117 226.984 268.344V200H429V270.018Z" />
      <path id="piece-5"  d="M529.961 170C546.529 170 559.961 183.431 559.961 200H630V270C613.431 270 600 283.431 600 300C600 316.569 613.431 330 630 330V400H426.538V330C411.881 330 400 316.568 400 300C400 283.432 411.881 270 426.538 270V200H499.961C499.961 183.432 513.393 170 529.961 170Z" />
      <path id="piece-6"  d="M431 470.018C416.691 470.545 405.234 483.766 405.234 500C405.234 516.234 416.691 529.454 431 529.981V600H226.654V529L225.966 528.99C211.563 528.579 200 515.31 200 499C200 482.431 211.934 469 226.654 469V400H296C296 416.569 309.431 430 326 430C342.569 430 356 416.569 356 400H431V470.018Z" />
      <path id="piece-7"  d="M115 370C131.569 370 145 383.431 145 400H230V469C213.431 469 200 482.431 200 499C200 515.569 213.431 529 230 529V600H0V400H85C85 383.431 98.4315 370 115 370Z" />
      <path id="piece-8"  d="M715 200C715 216.569 728.431 230 745 230C761.569 230 775 216.569 775 200H857V400H627V330C610.431 330 597 316.569 597 300C597 283.431 610.431 270 627 270V200H715Z" />
      <path id="piece-9"  d="M630 465C615.343 465 603.462 478.431 603.462 495C603.462 511.31 614.975 524.58 629.315 524.99L630 525V600H426.538V530C411.881 530 400 516.568 400 500C400 483.432 411.881 470 426.538 470V400H630V465Z" />
      <path id="piece-10" d="M857 200H775C775 216.569 761.569 230 745 230C728.431 230 715 216.569 715 200H632.308V130C616.121 130 603 116.569 603 100C603 83.4315 616.121 70 632.308 70V0H857V200Z" />
      <path id="piece-11" d="M857 600H627V525C610.431 525 597 511.569 597 495C597 478.431 610.431 465 627 465V400H857V600Z" />
    </defs>

    <!-- nơi chứa 12 mảnh -->
    <g id="pieces"></g>
  </svg>
</div>

<script>
  const svg    = document.getElementById("puzzle");
  const defs   = svg.querySelector("defs");
  const layer  = document.getElementById("pieces");

  // lấy 12 path trong defs (bỏ qua thẻ <image>)
  const piecePaths = [...defs.querySelectorAll("path")];

  const svgNS   = "http://www.w3.org/2000/svg";
  const xlinkNS = "http://www.w3.org/1999/xlink";

  piecePaths.forEach((path, index) => {
    // 1. clipPath cho từng mảnh
    const cp = document.createElementNS(svgNS, "clipPath");
    cp.id = `clip-${index}`;

    const useClip = document.createElementNS(svgNS, "use");
    useClip.setAttributeNS(xlinkNS, "xlink:href", `#${path.id}`);

    cp.appendChild(useClip);
    defs.appendChild(cp);

    // 2. group chứa mảnh
    const g = document.createElementNS(svgNS, "g");
    g.classList.add("piece");
    g.dataset.id = index;

    // phần ảnh bị cắt theo clipPath
    const img = document.createElementNS(svgNS, "use");
    img.setAttributeNS(xlinkNS, "xlink:href", "#full-img");
    img.setAttribute("clip-path", `url(#clip-${index})`);

    // viền mảnh
    const outline = document.createElementNS(svgNS, "use");
    outline.setAttributeNS(xlinkNS, "xlink:href", `#${path.id}`);
    outline.setAttribute("style", "fill:none;stroke:#333;stroke-width:2");

    g.appendChild(img);
    g.appendChild(outline);
    layer.appendChild(g);
  });
</script>
</body>
</html>
